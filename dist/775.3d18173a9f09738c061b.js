(self.webpackChunktest_angular=self.webpackChunktest_angular||[]).push([[775],{775:(t,a,e)=>{"use strict";e.r(a),e.d(a,{StudentsModule:()=>T});var i=e(1116),n=e(3337);function o(t,a,e,i,n,o,r){try{var s=t[o](r),l=s.value}catch(u){return void e(u)}s.done?a(l):Promise.resolve(l).then(i,n)}var r=e(5366),s=e(3587),l=e.t(s,2),u=e(1041),c=e(2935),d=e(3957),p=e(3070),m=e(9550),g=e(4369);function f(t,a){if(1&t){const t=r.EpF();r.TgZ(0,"form",2),r.TgZ(1,"h2"),r._uU(2,"Solicitud de Estudiante"),r.qZA(),r.TgZ(3,"mat-form-field",3),r.TgZ(4,"mat-label"),r._uU(5,"Nombre"),r.qZA(),r._UZ(6,"input",4),r.TgZ(7,"mat-error"),r._uU(8),r.qZA(),r.qZA(),r.TgZ(9,"mat-form-field",3),r.TgZ(10,"mat-label"),r._uU(11,"Fecha de Nacimiento"),r.qZA(),r._UZ(12,"input",5),r.TgZ(13,"mat-error"),r._uU(14),r.qZA(),r.qZA(),r.TgZ(15,"button",6),r.NdJ("click",function(){return r.CHM(t),r.oxw().addStudent()}),r.TgZ(16,"span"),r._uU(17,"A\xf1adir"),r.qZA(),r.qZA(),r.TgZ(18,"button",7),r.NdJ("click",function(){return r.CHM(t),r.oxw().dialogRef.close()}),r.TgZ(19,"span"),r._uU(20,"Cancelar"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("formGroup",t.studentForm),r.xp6(8),r.hij(" ",t.getErrorMessage("name","Por favor, introduzca un nombre adecuado")," "),r.xp6(4),r.s9C("max",t.fecha),r.xp6(2),r.hij(" ",t.getErrorMessage("dateOfBirth","Por favor, introduzca un nombre adecuado")," "),r.xp6(1),r.Q6J("disabled",t.studentForm.invalid)}}let h=(()=>{class t{constructor(t,a,e,i,n){this.dialog=t,this.dialogRef=a,this.fb=e,this.datePipe=i,this.api=n,this.closeModal=new r.vpe,this.date=new Date}ngOnInit(){this.fecha=this.datePipe.transform(this.date,"yyyy-MM-dd"),this.createForm()}createForm(){this.studentForm=this.fb.group({name:["",u.kI.required],dateOfBirth:["",u.kI.required]})}getErrorMessage(t,a){var e,i;return(null===(i=null===(e=this.studentForm)||void 0===e?void 0:e.controls[t])||void 0===i?void 0:i.hasError("required"))?"Este campo es requerido ":a||"Por favor, introduzca un valor v\xe1lido para este campo."}addStudent(){let t=[];localStorage.getItem("applications")?(t=JSON.parse(localStorage.getItem("applications")),t.push(Object.assign(Object.assign({},this.studentForm.value),{application_date:this.fecha,status:1,age:this.api.calculateAge(this.studentForm.value.dateOfBirth)})),localStorage.setItem("applications",JSON.stringify(t))):(t.push(Object.assign(Object.assign({},this.studentForm.value),{application_date:this.fecha,status:1,age:this.api.calculateAge(this.studentForm.value.dateOfBirth)})),localStorage.setItem("applications",JSON.stringify(t)))}}return t.\u0275fac=function(a){return new(a||t)(r.Y36(c.uw),r.Y36(c.so),r.Y36(u.qu),r.Y36(i.uU),r.Y36(d.t))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-application"]],outputs:{closeModal:"closeModal"},decls:2,vars:1,consts:[[1,"modal_content"],["class","form_content",3,"formGroup",4,"ngIf"],[1,"form_content",3,"formGroup"],["appearance","legacy",1,"field_modal"],["matInput","","placeholder","Nombre","formControlName","name","type","text","required",""],["matInput","","placeholder","Fecha","formControlName","dateOfBirth","type","date","required","",3,"max"],["mat-dialog-close","true","mat-raised-button","","type","submit","color","primary",1,"form-button",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",1,"btn-color",3,"click"]],template:function(t,a){1&t&&(r.TgZ(0,"div",0),r.YNc(1,f,21,5,"form",1),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngIf",a.studentForm))},directives:[i.O5,u._Y,u.JL,u.sg,p.KE,p.hX,m.Nt,u.Fj,u.JJ,u.u,u.Q7,p.TO,g.lW,c.ZT],styles:[".modal_content[_ngcontent-%COMP%]{display:flex;height:auto;width:100%;justify-content:center;align-items:center}.form_content[_ngcontent-%COMP%]{flex-direction:column;display:flex}.field_modal[_ngcontent-%COMP%]{padding:6% 1% 6% 0}.form-button[_ngcontent-%COMP%]{margin-bottom:6%}"]}),t})();var b=e(611);const v=JSON.parse('[{"id":1,"value":"En espera"},{"id":2,"value":"En revisi\xf3n"},{"id":3,"value":"Aprobado"},{"id":4,"value":"Cancelado"}]');var Z=e.t(v,2),y=e(7173),_=e(5307);const A=[{path:"",component:(()=>{class t{constructor(t,a){this.api=t,this.dialog=a,this.students=new r.vpe,this.dataTable=JSON.parse(JSON.stringify(l)).default,this.dataStatus=JSON.parse(JSON.stringify(Z)).default,this.applications=new r.vpe,this.dateTableApp=[{name:"Application Date",value:"application_date",type:"string"},{name:"Name",value:"name",type:"string"},{name:"Age",value:"age",type:"number"},{name:"Status",value:"status",type:"number"}]}ngOnInit(){this.api.getStudents().subscribe(t=>{this.students.emit(t.map(t=>(t.dateOfBirth&&(t.age=this.api.calculateAge(t.dateOfBirth)),t))),JSON.parse(localStorage.getItem("applications"))?this.applications.emit(JSON.parse(localStorage.getItem("applications")).map(t=>(t.status&&(t.status=this.dataStatus.find(a=>a.id=t.status).value),t))):this.applications.emit([])})}addApplication(){var t,a=this;return(t=function*(){const t=a.dialog.open(h,{minWidth:"330px",panelClass:"dialog-container",disableClose:!0});yield t.afterClosed().pipe((0,b.q)(1)).toPromise().then(t=>{"true"==t&&a.applications.emit(JSON.parse(localStorage.getItem("applications")).map(t=>(t.status&&(t.status=a.dataStatus.find(a=>a.id=t.status).value),t)))})},function(){var a=this,e=arguments;return new Promise(function(i,n){var r=t.apply(a,e);function s(t){o(r,i,n,s,l,"next",t)}function l(t){o(r,i,n,s,l,"throw",t)}s(void 0)})})()}}return t.\u0275fac=function(a){return new(a||t)(r.Y36(d.t),r.Y36(c.uw))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-students"]],decls:8,vars:4,consts:[[1,"body_table"],["label","Estudiantes"],[3,"arrayData","dataTable"],["label","Solicitudes"],["mat-raised-button","","color","primary",1,"application_button",3,"click"]],template:function(t,a){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"mat-tab-group"),r.TgZ(2,"mat-tab",1),r._UZ(3,"app-table",2),r.qZA(),r.TgZ(4,"mat-tab",3),r.TgZ(5,"button",4),r.NdJ("click",function(){return a.addApplication()}),r._uU(6,"Agregar "),r.qZA(),r._UZ(7,"app-table",2),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(3),r.Q6J("arrayData",a.students)("dataTable",a.dataTable),r.xp6(4),r.Q6J("arrayData",a.applications)("dataTable",a.dateTableApp))},directives:[y.SP,y.uX,_.a,g.lW],styles:[".application_button[_ngcontent-%COMP%]{right:0;position:absolute;margin-top:1rem}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[n.Bz.forChild(A)],n.Bz]}),t})();var S=e(5425);let T=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[i.ez,O,S.m]]}),t})()}}]);